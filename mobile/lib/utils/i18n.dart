import 'package:shared_preferences/shared_preferences.dart';

class I18n {
  static const String _langKey = 'lang';
  static String _currentLang = 'en';

  static Future<void> init() async {
    final prefs = await SharedPreferences.getInstance();
    _currentLang = prefs.getString(_langKey) ?? 'en';
  }

  static Future<void> setLanguage(String lang) async {
    _currentLang = lang;
    final prefs = await SharedPreferences.getInstance();
    await prefs.setString(_langKey, lang);
  }

  static String get currentLang => _currentLang;

  static String t(String key, [Map<String, String>? params]) {
    final Map<String, Map<String, String>> translations = {
      'en': {
        'common.save': 'Save',
        'common.cancel': 'Cancel',
        'common.delete': 'Delete',
        'common.edit': 'Edit',
        'common.create': 'Create',
        'common.noRecords': 'No records found',
        'common.menuName': 'Menu Name',
        'common.createNewMenu': 'Create New Menu',
        'common.briefDescription': 'Brief Description',
        'common.selectItems': 'Select Items',
        'common.clickItemsToAddToMenu': 'Click items to add to menu',
        'common.selectAll': 'Select All',
        'common.noInventoryItems': 'No inventory items',
        'common.addInventoryItemsFirst': 'Add inventory items first',
        'common.addInventoryItem': 'Add Inventory Item',
        'common.noItemsSelectedYet': 'No items selected yet',
        'common.selectedItems': 'Selected Items',
        'common.createMenu': 'Create Menu',
        'common.invetoryItems': 'Inventory Items',
        'common.inventoryInflow': 'Inventory Inflow',
        'common.viewItemsAcrossBranches': 'View Items Across Branches',
        'common.analytics': 'Analytics',
        'common.addCategory': 'Add Category',
        'common.addUom': 'Add UOM',
        'common.baseUomWarning': 'Please select a base UOM first',
        'common.baseUom': 'Base UOM',
        'common.selectCategory': 'Select Category',
        'common.selectSubCategory': 'Select Subcategory',
        'common.inflowDetails': 'Inflow Details',
        'common.selectSupplier': 'Select Supplier',
        'common.selectBranch': 'Select Branch',
        'common.receivedDate': 'Received Date',
        'common.addItems': 'Add Items',
        'common.quantity': 'Quantity',
        'common.thisLanguageWillBeUsed': 'This language will be used',
        'common.changeLanguage': 'Change Language',
        'common.addYourFirstConversion': 'Add Your First Conversion',
        'common.noConversionsYet': 'No conversions yet',
        'auth.login': 'Login',
        'auth.register': 'Register',
        'auth.logout': 'Logout',
        'auth.email': 'Email',
        'auth.password': 'Password',
        'auth.name': 'Name',
        'settings.language': 'Language',
        'settings.notifications': 'Notifications',
        'settings.darkMode': 'Dark Mode',
        'settings.about': 'About',
        'settings.help': 'Help & Support',
        'settings.accountInfo': 'Account Information',
        'settings.version': 'Version',
      },
      'de': {
        'common.save': 'Speichern',
        'common.cancel': 'Abbrechen',
        'common.delete': 'Löschen',
        'common.edit': 'Bearbeiten',
        'common.create': 'Erstellen',
        'auth.login': 'Anmelden',
        'auth.register': 'Registrieren',
        'auth.logout': 'Abmelden',
        'auth.email': 'E-Mail',
        'auth.password': 'Passwort',
        'auth.name': 'Name',
        'settings.language': 'Sprache',
        'settings.notifications': 'Benachrichtigungen',
        'settings.darkMode': 'Dunkler Modus',
        'settings.about': 'Über',
        'settings.help': 'Hilfe & Support',
        'settings.accountInfo': 'Kontoinformationen',
        'settings.version': 'Version',
      },
      'ha': {
        'common.save': 'Ajiye',
        'common.cancel': 'Soke',
        'common.delete': 'Share',
        'common.edit': 'Gyara',
        'common.create': 'Kirkiro',
        'auth.login': 'Shiga',
        'auth.register': 'Yi rijista',
        'auth.logout': 'Fita',
        'auth.email': 'Imel',
        'auth.password': 'Kalmar sirri',
        'auth.name': 'Suna',
        'settings.language': 'Harshe',
        'settings.notifications': 'Sanarwa',
        'settings.darkMode': 'Yanayin duhu',
        'settings.about': 'Game da',
        'settings.help': 'Taimako & Tallafi',
        'settings.accountInfo': 'Bayanin asusu',
        'settings.version': 'Sigar',
      },
      'es': {
        'common.save': 'Guardar',
        'common.cancel': 'Cancelar',
        'common.delete': 'Eliminar',
        'common.edit': 'Editar',
        'common.create': 'Crear',
        'common.noRecords': 'No se encontraron registros',
        'common.menuName': 'Nombre del Menú',
        'common.createNewMenu': 'Crear Nuevo Menú',
        'common.briefDescription': 'Descripción Breve',
        'common.selectItems': 'Seleccionar Artículos',
        'common.clickItemsToAddToMenu': 'Haga clic en los artículos para agregarlos al menú',
        'common.selectAll': 'Seleccionar Todo',
        'common.noInventoryItems': 'No hay artículos de inventario',
        'common.addInventoryItemsFirst': 'Agregar artículos de inventario primero',
        'common.addInventoryItem': 'Agregar Artículo de Inventario',
        'common.noItemsSelectedYet': 'Aún no se han seleccionado artículos',
        'common.selectedItems': 'Artículos Seleccionados',
        'common.createMenu': 'Crear Menú',
        'common.invetoryItems': 'Artículos de Inventario',
        'common.inventoryInflow': 'Entrada de Inventario',
        'common.viewItemsAcrossBranches': 'Ver Artículos en Todas las Sucursales',
        'common.analytics': 'Análisis',
        'common.addCategory': 'Agregar Categoría',
        'common.addUom': 'Agregar UOM',
        'common.baseUomWarning': 'Por favor seleccione una UOM base primero',
        'common.baseUom': 'UOM Base',
        'common.selectCategory': 'Seleccionar Categoría',
        'common.selectSubCategory': 'Seleccionar Subcategoría',
        'common.inflowDetails': 'Detalles de Entrada',
        'common.selectSupplier': 'Seleccionar Proveedor',
        'common.selectBranch': 'Seleccionar Sucursal',
        'common.receivedDate': 'Fecha de Recepción',
        'common.addItems': 'Agregar Artículos',
        'common.quantity': 'Cantidad',
        'common.thisLanguageWillBeUsed': 'Este idioma se utilizará',
        'common.changeLanguage': 'Cambiar Idioma',
        'common.addYourFirstConversion': 'Agregue Su Primera Conversión',
        'common.noConversionsYet': 'Aún no hay conversiones',
        'auth.login': 'Iniciar sesión',
        'auth.register': 'Registrarse',
        'auth.logout': 'Cerrar sesión',
        'auth.email': 'Correo',
        'auth.password': 'Contraseña',
        'auth.name': 'Nombre',
      },
      'fr': {
        'common.save': 'Enregistrer',
        'common.cancel': 'Annuler',
        'common.delete': 'Supprimer',
        'common.edit': 'Modifier',
        'common.create': 'Créer',
        'common.noRecords': 'Aucun enregistrement trouvé',
        'common.menuName': 'Nom du Menu',
        'common.createNewMenu': 'Créer un Nouveau Menu',
        'common.briefDescription': 'Description Brève',
        'common.selectItems': 'Sélectionner les Articles',
        'common.clickItemsToAddToMenu': 'Cliquez sur les articles pour les ajouter au menu',
        'common.selectAll': 'Tout Sélectionner',
        'common.noInventoryItems': 'Aucun article d\'inventaire',
        'common.addInventoryItemsFirst': 'Ajouter d\'abord des articles d\'inventaire',
        'common.addInventoryItem': 'Ajouter un Article d\'Inventaire',
        'common.noItemsSelectedYet': 'Aucun article sélectionné pour le moment',
        'common.selectedItems': 'Articles Sélectionnés',
        'common.createMenu': 'Créer un Menu',
        'common.invetoryItems': 'Articles d\'Inventaire',
        'common.inventoryInflow': 'Entrée d\'Inventaire',
        'common.viewItemsAcrossBranches': 'Voir les Articles dans Toutes les Succursales',
        'common.analytics': 'Analyses',
        'common.addCategory': 'Ajouter une Catégorie',
        'common.addUom': 'Ajouter une UOM',
        'common.baseUomWarning': 'Veuillez d\'abord sélectionner une UOM de base',
        'common.baseUom': 'UOM de Base',
        'common.selectCategory': 'Sélectionner une Catégorie',
        'common.selectSubCategory': 'Sélectionner une Sous-catégorie',
        'common.inflowDetails': 'Détails de l\'Entrée',
        'common.selectSupplier': 'Sélectionner un Fournisseur',
        'common.selectBranch': 'Sélectionner une Succursale',
        'common.receivedDate': 'Date de Réception',
        'common.addItems': 'Ajouter des Articles',
        'common.quantity': 'Quantité',
        'common.thisLanguageWillBeUsed': 'Cette langue sera utilisée',
        'common.changeLanguage': 'Changer de Langue',
        'common.addYourFirstConversion': 'Ajoutez Votre Première Conversion',
        'common.noConversionsYet': 'Aucune conversion pour le moment',
        'auth.login': 'Connexion',
        'auth.register': 'S\'inscrire',
        'auth.logout': 'Déconnexion',
        'auth.email': 'Email',
        'auth.password': 'Mot de passe',
        'auth.name': 'Nom',
      },
    };

    final langMap = translations[_currentLang];
    String translation = langMap?[key] ?? key;

    if (params != null) {
      params.forEach((key, value) {
        translation = translation.replaceAll('{$key}', value);
      });
    }

    return translation;
  }
}

